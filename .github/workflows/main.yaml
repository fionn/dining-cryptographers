name: CI

on: push

jobs:

  lint:

    name: Lint
    runs-on: ubuntu-latest

    steps:

      - name: Checkout
        uses: actions/checkout@v6
        with:
          persist-credentials: false

      - name: Set up Python
        uses: actions/setup-python@v6
        with:
          python-version: "3.14"

      - name: Install development dependencies
        run: |
          pip install --progress-bar off -r requirements_dev.txt
        env:
          PIP_DISABLE_PIP_VERSION_CHECK: 1

      - name: Lint
        run: make lint

      - name: Typecheck
        run: make typecheck

  test:

    name: Test
    runs-on: ubuntu-latest

    steps:

      - name: Checkout
        uses: actions/checkout@v6
        with:
          persist-credentials: false

      - name: Set up Python
        uses: actions/setup-python@v6
        with:
          python-version: "3.14"
          cache: pip
          cache-dependency-path: requirements_dev.txt

      - name: Test
        run: python -m unittest -v --locals --buffer
